<!DOCTYPE html>
<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->


<body onload="DefaultScreen()">


    <div class="container-fluid maincontainer">
    </div>

    <div class="container px-4">
        <div class="row gx-sm-5 days">
            <div class="col one d-flex aligns-items-center">
                <div class="p-5 mb-2 bg-dark text-white rounded-3 border border-3 border-white">
                    <div class="mb-4 rounded-2 day-background" id="day1">MON</div>
                    <div class="image"><img src="" class="imgClass" id="img1"></div>
                    <div class="temp" id="day1Min">26 C</div>
                    <div class="temp" id="date1">9-21-2022</div>
                </div>
            </div>

            <div class="col one d-flex aligns-items-center">
                <div class="p-5 mb-2 bg-dark text-white rounded-3 border border-3 border-white">
                    <div class="mb-4 rounded-2 day-background" id="day2">MON</div>
                    <div class="image"><img src="" class="imgClass" id="img2"></div>
                    <div class="temp" id="day2Min">26 C</div>
                    <div class="temp" id="date2">9-21-2022</div>
                </div>
            </div>

            <div class="col one d-flex aligns-items-center">
                <div class="p-5 mb-2 bg-dark text-white rounded-3 border border-3 border-white">
                    <div class="mb-4 rounded-2 day-background" id="day3">MON</div>
                    <div class="image"><img src="" class="imgClass" id="img3"></div>
                    <div class="temp" id="day3Min">26 C</div>
                    <div class="temp" id="date3">9-21-2022</div>
                </div>
            </div>

            <div class="col one d-flex aligns-items-center">
                <div class="p-5 mb-2 bg-dark text-white rounded-3 border border-3 border-white">
                    <div class="mb-4 rounded-2 day-background" id="day4">MON</div>
                    <div class="image"><img src="" class="imgClass" id="img4"></div>
                    <div class="temp" id="day4Min">26 C</div>
                    <div class="temp" id="date4">9-21-2022</div>
                </div>
            </div>

            <div class="col one d-flex aligns-items-center">
                <div class="p-5 mb-2 bg-dark text-white rounded-3 border border-3 border-white">
                    <div class="mb-4 rounded-2 day-background" id="day5">MON</div>
                    <div class="image"><img src="" class="imgClass" id="img5"></div>
                    <div class="temp" id="day5Min">26 C</div>
                    <div class="temp" id="date5">9-21-2022</div>
                </div>
            </div>
        </div>

        <div class="datee">
            <div class="main-date" id="dates">SEPT 28 2022</div>
        </div>
        <div class="container-fluid location">
            <div class="row">
                <div class="col col-3 text-uppercase" id="cityName">
                    Davao
                </div>
                <div class="col country" id="country">
                    PH
                </div>
            </div>
        </div>

        <div class="coordinates">
            <h4 id="lat">10.35335E</h4>
            <h4 id="long">78.57693N</h4>
        </div>

    </div>
    </div>


    <p id="inputContainer"><input type="text" id="cityInput"></p>
    <button class="btn btn-outline-dark" onclick="GetInfo()" type="button" id="button-addon2">
        <iconify-icon icon="akar-icons:search"></iconify-icon>
    </button>



</body>

<script>
    function GetInfo() {

        var newName = document.getElementById("cityInput");
        var cityName = document.getElementById("cityName");
        var newDate = document.getElementById("dates");
        cityName.innerHTML = newName.value;

        //API
        fetch('https://api.openweathermap.org/data/2.5/forecast?q=' + newName.value +
                '&appid=32ba0bfed592484379e51106cef3f204')
            .then(response => response.json())
            .then(data => {

                //DATE
                var ts = new Date(data.list[0].dt);
                var date = new Date(ts * 1000)
                newDate.innerHTML = date.toDateString();
                
                //LATITUDE
                for (i = 0; i < 1; i++) {
                    document.getElementById("lat").innerHTML = data.city.coord.lat + "E";
                }

                //longitude
                for (i = 0; i < 1; i++) {
                    document.getElementById("long").innerHTML = data.city.coord.lon + "N";
                }
                //COUNTRY
                for (i = 0; i < 1; i++) {
                    document.getElementById("country").innerHTML = data.city.country;
                }

                //Getting the temp values for each day
                var dum = 0;
                for (i = 0; i < 40; i += 8) {
                    document.getElementById("day" + (dum + 1) + "Min").innerHTML = Number(data.list[
                            i]
                        .main.temp - 273.15).toFixed(1) + "Â° C";
                    dum++;
                }

                //Getting the Date for each day
                var dummy = 0;
                for (i = 0; i < 40; i += 8) {
                    var trialone = new Date(data.list[i].dt_txt);
                    var trialTwo = trialone.toDateString();
                    document.getElementById("date" + (dummy + 1)).innerHTML = trialTwo;
                    dummy++;
                }

                var dumthree = 0;
                //Getting Weather Icons
                for (i = 0; i < 40; i += 8) {
                    document.getElementById("img" + (dumthree + 1)).src = "http://openweathermap.org/img/wn/" +
                        data.list[i].weather[0].icon +
                        "@2x.png";
                    dumthree++;
                }

            
                console.log(trialTwo);
                console.log(data)

            })

            .catch(err => alert("Input error, Please try again"))
    }
    //SET THE DEFAULT CITY TO DAVAO
    function DefaultScreen() {
        document.getElementById("cityInput").defaultValue = "Davao";
        GetInfo();
    }

    //Getting and displaying the text for the upcoming five days of the week
    var d = new Date();
    var weekday = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT", ];

    //Function to get the correct integer for the index of the days array
    function CheckDay(day) {
        if (day + d.getDay() > 6) {
            return day + d.getDay() - 7;
        } else {
            return day + d.getDay();
        }
    }

    for (i = 0; i < 5; i++) {
        document.getElementById("day" + (i + 1)).innerHTML = weekday[CheckDay(i)];
    }
</script>


<style>
    body {
        background: url('https://images.unsplash.com/photo-1487621167305-5d248087c724?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1632&q=80');
        background-repeat: no-repeat;
        background-size: cover;
        overflow: hidden;
        height: 100vh;
    }

    .maincontainer {
        position: fixed;
        background-color: black;
        opacity: 50%;
        height: 370px;
        top: 605px;
    }

    .bg-dark {
        opacity: 90%;
    }


    .one {
        position: relative;
        border-radius: 25px;
        padding: 30px;
        height: 370px;
        top: 610px;
        transition: transform .2s;

    }

    .one:hover {
        transform: scale(1.1);
    }

    .days {
        height: 200px;

    }

    .day-background {
        position: relative;
        background-color: white;
        top: 0px;
        padding: 7px;
        height: 40px;
        width: 90px;
        color: black;
        text-align: center;
    }

    .temp {
        text-align: center;
        padding: 2px;
        font-size: 16px;
    }

    .datee {
        position: relative;
        top: -60px;
        left: -112px;
    }

    .main-date {
        position: relative;
        font-size: 60px;
        color: white;
        font-family: 'Sansation', sans-serif;

    }

    .location {
        position: absolute;
        top: 200px;
        left: 200px;
        font-size: 60px;
        color: white;
        font-family: 'Sansation', sans-serif;
    }

    .country {
        position: relative;
        top: 60px;
        right: 480px;
    }

    #cityInput,
    #inputContainer {
        position: relative;
        margin: 3px;
        padding: 5px;
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        top: -105px;
        border-radius: 10px;


    }

    .search-button {
        position: relative;

    }

    #cityInput {
        background-color: whitesmoke;
        opacity: 80%;
        margin-top: 70px;
    }

    .btn {
        position: relative;
        top: -262px;
        left: 1110px;
    }

    #lat {
        position: relative;
        font-family: 'Sansation', sans-serif;
        color: white;
        font-size: 20px;
        top: 50px;
        left: -110px;
    }

    #long {
        position: relative;
        font-family: 'Sansation', sans-serif;
        color: white;
        font-size: 20px;
        top: 18px;
        left: 4px;
    }
</style>

<style>
    @import url('http://fonts.cdnfonts.com/css/sansation');
</style>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous">

</script>
<script src="https://code.iconify.design/iconify-icon/1.0.0/iconify-icon.min.js"></script>



</html>
